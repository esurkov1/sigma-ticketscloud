# Sigma App для TicketsCloud

Интеграция виджета TicketsCloud с Telegram Mini App.

## Описание

Это простая HTML-страница, которая работает как Telegram Mini App и интегрируется с виджетом TicketsCloud для продажи билетов. Приложение поддерживает:

- Работу как в браузере, так и в Telegram
- Передачу идентификатора пользователя (uid) из Telegram в vendor_data
- Передачу UTM-меток для отслеживания источников трафика
- Использование параметра startapp из Telegram в качестве utm_content
- Режимы отображения: встроенный фрейм или прямой редирект

## Настройка

1. Откройте файл `index.html` и проверьте следующие параметры:
   - Токен TicketsCloud
   - Идентификатор события TicketsCloud

2. Публикация:
   - Загрузите код в репозиторий GitHub
   - Включите GitHub Pages для публикации страницы

## Параметры URL (для тестирования вне Telegram)

Страница поддерживает следующие параметры URL:

- `uid` - идентификатор пользователя (если не запущено в Telegram)
- `startapp` - параметр start_param (если не запущено в Telegram)
- `redirect` - установите в `true`, чтобы использовать редирект вместо iframe

## Использование в Telegram Mini App

1. Создайте бота в @BotFather
2. Включите Mini App в настройках бота:
   ```
   /mybots -> Выберите бота -> Bot Settings -> Menu Button -> Edit Menu Button URL
   ```

3. Укажите URL вашей опубликованной страницы в настройках Mini App

4. Для передачи параметра используйте URL с startapp:
   ```
   https://t.me/ваш_бот/app?startapp=значение_параметра
   ```

   Где `значение_параметра` будет передано как utm_content.

## UTM-метки

В приложении устанавливаются следующие UTM-метки:
- utm_source=telegram (фиксировано)
- utm_medium=miniapp (фиксировано)
- utm_content=значение_параметра_startapp

## Обработка вебхуков

После настройки Mini App и TicketsCloud, вы можете добавить обработку вебхуков для получения уведомлений о покупке билетов:

1. Создайте серверный обработчик для получения вебхуков
2. В личном кабинете TicketsCloud перейдите в раздел "Интеграции" > "Вебхуки" 
3. Добавьте URL вашего обработчика

## Лицензия

MIT